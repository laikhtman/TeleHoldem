@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================================================
   iOS-SPECIFIC OPTIMIZATIONS
   ================================================
   Apply iOS-specific fixes for optimal mobile experience
   ================================================ */

@layer base {
  /* Global iOS optimizations */
  html {
    /* Prevent double-tap zoom on iOS */
    touch-action: manipulation;
    /* Smooth scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    /* Prevent text size adjustment on orientation change */
    -webkit-text-size-adjust: 100%;
    /* Use dynamic viewport height for proper iOS Safari support */
    height: 100dvh;
    /* Prevent overscroll bounce on iOS */
    overscroll-behavior-y: contain;
  }

  body {
    /* Ensure full height on iOS */
    min-height: 100dvh;
    /* Prevent iOS bounce scrolling on body */
    overscroll-behavior: none;
  }

  /* Prevent double-tap zoom on all interactive elements */
  button, 
  input, 
  select, 
  textarea,
  a,
  .clickable,
  [role="button"],
  [role="link"],
  [data-testid*="button"] {
    touch-action: manipulation;
    /* Disable iOS tap highlight */
    -webkit-tap-highlight-color: transparent;
    /* Prevent iOS zoom on input focus (minimum 16px) */
    font-size: max(1rem, 16px);
  }

  /* Ensure sliders work smoothly on iOS */
  input[type="range"] {
    touch-action: pan-y;
  }

  /* Fix for fixed positioning on iOS Safari */
  .fixed {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }

  /* Momentum scrolling for scrollable areas */
  .scroll-area,
  .overflow-auto,
  .overflow-y-auto,
  .overflow-x-auto,
  .overflow-scroll,
  [class*="overflow-"] {
    -webkit-overflow-scrolling: touch;
  }

  /* Prevent text selection on game elements */
  .poker-table,
  .playing-card,
  .player-seat,
  .action-controls,
  [data-testid*="poker-table"],
  [data-testid*="playing-card"],
  [data-testid*="player-seat"] {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }
}

/* ================================================
   COMPREHENSIVE DESIGN TOKEN SYSTEM
   ================================================
   All design tokens are centralized here for consistency.
   Use these tokens throughout the application instead of hardcoded values.
   ================================================ */

/* LIGHT MODE TOKENS */
:root {
  /* ================== RESPONSIVE BASE FONT SIZE ================== */
  /* Sets the root font size for proper rem scaling across devices */
  font-size: 14px; /* Mobile base (<768px) */
  
  /* ================== iOS SAFE AREA SUPPORT ================== */
  /* Safe area insets with fallbacks for iOS devices */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  
  /* iOS status bar height (20px standard, 44px on notched) */
  --ios-status-bar: max(env(safe-area-inset-top, 0px), 20px);
  
  /* iOS home indicator height */
  --ios-home-indicator: max(env(safe-area-inset-bottom, 0px), 34px);
  
  /* Custom viewport height for iOS */
  --vh: 1vh;
  
  /* ================== SPACING TOKENS ================== */
  /* Use these for all padding, margin, and gap values */
  --spacing-xs: 0.25rem;   /* 4px at base 16px */
  --spacing-sm: 0.5rem;    /* 8px */
  --spacing-md: 1rem;      /* 16px */
  --spacing-lg: 1.5rem;    /* 24px */
  --spacing-xl: 2rem;      /* 32px */
  --spacing-2xl: 3rem;     /* 48px */
  --spacing-3xl: 4rem;     /* 64px */
  --spacing-4xl: 5rem;     /* 80px */
  --spacing-5xl: 6rem;     /* 96px */

  /* ================== TYPOGRAPHY TOKENS ================== */
  /* Font Families */
  --font-sans: Inter, system-ui, sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: JetBrains Mono, Menlo, monospace;
  
  /* Font Sizes - Use rem for scalable typography */
  --font-size-xs: 0.75rem;    /* 10.5px mobile, 11.25px tablet, 12px desktop */
  --font-size-sm: 0.875rem;   /* 12.25px mobile, 13.125px tablet, 14px desktop */
  --font-size-base: 1rem;     /* 14px mobile, 15px tablet, 16px desktop */
  --font-size-lg: 1.125rem;   /* 15.75px mobile, 16.875px tablet, 18px desktop */
  --font-size-xl: 1.25rem;    /* 17.5px mobile, 18.75px tablet, 20px desktop */
  --font-size-2xl: 1.5rem;    /* 21px mobile, 22.5px tablet, 24px desktop */
  --font-size-3xl: 2rem;      /* 28px mobile, 30px tablet, 32px desktop */
  --font-size-4xl: 2.5rem;    /* 35px mobile, 37.5px tablet, 40px desktop */
  --font-size-5xl: 3rem;      /* 42px mobile, 45px tablet, 48px desktop */
  
  /* Font Weights */
  --font-weight-thin: 100;
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --font-weight-extrabold: 800;
  --font-weight-black: 900;
  
  /* Line Heights */
  --line-height-none: 1;
  --line-height-tight: 1.25;
  --line-height-snug: 1.375;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.625;
  --line-height-loose: 2;
  
  /* Letter Spacing */
  --letter-spacing-tighter: -0.05em;
  --letter-spacing-tight: -0.025em;
  --letter-spacing-normal: 0em;
  --letter-spacing-wide: 0.025em;
  --letter-spacing-wider: 0.05em;
  --letter-spacing-widest: 0.1em;

  /* ================== RADIUS TOKENS ================== */
  /* Use for all border-radius values */
  --radius-none: 0;
  --radius-sm: 0.25rem;    /* 4px */
  --radius-md: 0.5rem;     /* 8px - Default radius */
  --radius-lg: 0.75rem;    /* 12px */
  --radius-xl: 1rem;       /* 16px */
  --radius-2xl: 1.5rem;    /* 24px */
  --radius-full: 9999px;   /* Perfect circle/pill */
  
  /* Backward compatibility */
  --radius: var(--radius-md);

  /* ================== SHADOW TOKENS ================== */
  /* Elevation scale for depth perception */
  --shadow-none: none;
  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.05);
  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.08);
  --shadow-sm: 0px 2px 4px -1px hsl(0 0% 0% / 0.06), 0px 1px 2px -1px hsl(0 0% 0% / 0.04);
  --shadow: 0px 4px 6px -1px hsl(0 0% 0% / 0.08), 0px 2px 4px -2px hsl(0 0% 0% / 0.05);
  --shadow-md: 0px 6px 12px -2px hsl(0 0% 0% / 0.10), 0px 3px 6px -3px hsl(0 0% 0% / 0.05);
  --shadow-lg: 0px 10px 20px -4px hsl(0 0% 0% / 0.12), 0px 4px 8px -4px hsl(0 0% 0% / 0.06);
  --shadow-xl: 0px 20px 30px -6px hsl(0 0% 0% / 0.15), 0px 8px 12px -6px hsl(0 0% 0% / 0.08);
  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.25);
  --shadow-inner: inset 0 2px 4px 0 hsl(0 0% 0% / 0.05);

  /* ================== ANIMATION TOKENS ================== */
  /* Transition Durations */
  --transition-fastest: 50ms;
  --transition-faster: 100ms;
  --transition-fast: 150ms;
  --transition-base: 300ms;
  --transition-slow: 500ms;
  --transition-slower: 700ms;
  --transition-slowest: 1000ms;
  
  /* Easing Functions */
  --ease-linear: linear;
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
  
  /* Animation Performance Settings */
  --animation-duration-fast: var(--transition-fast);
  --animation-duration-normal: var(--transition-base);
  --animation-duration-slow: var(--transition-slow);
  --animation-stagger-delay: 100ms;
  --max-concurrent-animations: 5;

  /* ================== COLOR TOKENS ================== */
  
  /* Core Color System - Semantic tokens for consistent theming */
  
  /* Background Colors */
  --color-background: 0 0% 98%;              /* Main background */
  --color-background-secondary: 0 0% 96%;    /* Secondary background */
  --color-background-tertiary: 0 0% 94%;     /* Tertiary background */
  --color-background-elevated: 0 0% 100%;    /* Elevated surfaces */
  
  /* Foreground/Text Colors */
  --color-foreground: 0 0% 10%;              /* Primary text */
  --color-foreground-secondary: 0 0% 30%;    /* Secondary text */
  --color-foreground-tertiary: 0 0% 50%;     /* Tertiary text */
  --color-foreground-muted: 0 0% 60%;        /* Muted text */
  --color-foreground-inverse: 0 0% 98%;      /* Inverse text */
  
  /* Surface Colors (Cards, Modals, etc) */
  --color-surface: 0 0% 96%;                 /* Card backgrounds */
  --color-surface-secondary: 0 0% 94%;       /* Secondary surfaces */
  --color-surface-tertiary: 0 0% 92%;        /* Tertiary surfaces */
  
  /* Border Colors */
  --color-border: 0 0% 88%;                  /* Default borders */
  --color-border-secondary: 0 0% 85%;        /* Secondary borders */
  --color-border-tertiary: 0 0% 82%;         /* Tertiary borders */
  --color-border-focus: 45 90% 55%;          /* Focus borders */
  
  /* Brand/Primary Colors */
  --color-primary: 45 90% 45%;               /* Primary brand color */
  --color-primary-hover: 45 90% 40%;         /* Primary hover state */
  --color-primary-active: 45 90% 35%;        /* Primary active state */
  --color-primary-foreground: 45 5% 98%;     /* Text on primary */
  
  /* Secondary Colors */
  --color-secondary: 0 0% 86%;               /* Secondary color */
  --color-secondary-hover: 0 0% 82%;         /* Secondary hover */
  --color-secondary-active: 0 0% 78%;        /* Secondary active */
  --color-secondary-foreground: 0 0% 18%;    /* Text on secondary */
  
  /* State Colors */
  --color-success: 140 60% 50%;              /* Success state */
  --color-success-foreground: 140 5% 98%;    /* Text on success */
  --color-warning: 45 90% 55%;               /* Warning state */
  --color-warning-foreground: 45 5% 10%;     /* Text on warning */
  --color-error: 0 70% 50%;                  /* Error state */
  --color-error-foreground: 0 5% 98%;        /* Text on error */
  --color-info: 220 60% 45%;                 /* Info state */
  --color-info-foreground: 220 5% 98%;       /* Text on info */
  
  /* Accent Colors */
  --color-accent: 140 15% 88%;               /* Accent color */
  --color-accent-hover: 140 15% 84%;         /* Accent hover */
  --color-accent-active: 140 15% 80%;        /* Accent active */
  --color-accent-foreground: 140 10% 22%;    /* Text on accent */
  
  /* Muted Colors */
  --color-muted: 140 8% 90%;                 /* Muted backgrounds */
  --color-muted-hover: 140 8% 86%;           /* Muted hover */
  --color-muted-active: 140 8% 82%;          /* Muted active */
  --color-muted-foreground: 140 10% 25%;     /* Text on muted */
  
  /* Interactive Element States */
  --color-hover: rgba(0, 0, 0, 0.03);        /* Hover overlay */
  --color-active: rgba(0, 0, 0, 0.08);       /* Active overlay */
  --color-disabled: rgba(0, 0, 0, 0.38);     /* Disabled overlay */
  
  /* Focus/Selection Colors */
  --color-focus: 45 90% 55%;                 /* Focus rings */
  --color-selection: 45 90% 85%;             /* Text selection */
  
  /* Legacy mappings for backwards compatibility */
  --background: var(--color-background);
  --foreground: var(--color-foreground);
  --border: var(--color-border);
  
  --card: var(--color-surface);
  --card-foreground: var(--color-foreground);
  --card-border: var(--color-border);
  
  --primary: var(--color-primary);
  --primary-foreground: var(--color-primary-foreground);
  
  --secondary: var(--color-secondary);
  --secondary-foreground: var(--color-secondary-foreground);
  
  --muted: var(--color-muted);
  --muted-foreground: var(--color-muted-foreground);
  
  --accent: var(--color-accent);
  --accent-foreground: var(--color-accent-foreground);
  
  --destructive: var(--color-error);
  --destructive-foreground: var(--color-error-foreground);
  
  /* Component-specific colors */
  --sidebar: var(--color-surface-secondary);
  --sidebar-foreground: var(--color-foreground);
  --sidebar-border: var(--color-border);
  --sidebar-primary: var(--color-primary);
  --sidebar-primary-foreground: var(--color-primary-foreground);
  --sidebar-accent: var(--color-accent);
  --sidebar-accent-foreground: var(--color-accent-foreground);
  --sidebar-ring: var(--color-focus);
  
  --popover: var(--color-surface-tertiary);
  --popover-foreground: var(--color-foreground);
  --popover-border: var(--color-border-secondary);
  
  --input: 0 0% 70%;
  --ring: var(--color-focus);
  
  /* Chart colors */
  --chart-1: 140 60% 40%;
  --chart-2: 45 85% 45%;
  --chart-3: 0 70% 50%;
  --chart-4: 220 60% 45%;
  --chart-5: 280 60% 45%;
  
  /* Poker-specific colors */
  --poker-felt: 140 70% 25%;
  --poker-felt-light: 140 60% 30%;
  --poker-table-border: 25 35% 28%;
  --poker-card-bg: 0 0% 95%;
  --poker-card-red: 0 85% 45%;
  --poker-card-black: 0 0% 10%;
  --poker-chip-gold: 45 90% 55%;
  --poker-success: 140 60% 50%;
  
  /* Elevation system overlays */
  --elevate-1: var(--color-hover);
  --elevate-2: var(--color-active);
  
  /* Button outlines */
  --button-outline: rgba(0, 0, 0, .10);
  --badge-outline: rgba(0, 0, 0, .05);
  
  /* Border intensity for computed borders */
  --opaque-button-border-intensity: -8;
  
  /* ================== Z-INDEX TOKENS ================== */
  /* Layering system for consistent stacking */
  --z-base: 0;
  --z-dropdown: 10;
  --z-sticky: 50;
  --z-fixed: 100;
  --z-overlay: 200;
  --z-modal: 300;
  --z-popover: 400;
  --z-tooltip: 500;
  --z-notification: 600;
  --z-max: 9999;
  
  /* Poker-specific z-index */
  --z-table-base: 0;
  --z-felt: 1;
  --z-community-cards: 3;
  --z-pot-display: 3;
  --z-player-seats: 4;
  --z-controls: 5;
  --z-overlays: 10;
  --z-modals: 20;
  --z-tooltips: 30;
  --z-fixed-ui: 50;
  
  /* ================== BREAKPOINT TOKENS ================== */
  /* For use in CSS calc() or custom properties */
  --breakpoint-xs: 480px;
  --breakpoint-sm: 640px;
  --breakpoint-md: 768px;
  --breakpoint-lg: 1024px;
  --breakpoint-xl: 1280px;
  --breakpoint-2xl: 1536px;
  
  /* ================== SAFE AREA TOKENS ================== */
  /* iOS notch and home indicator support */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  
  /* Automatically computed borders */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

/* ================== RESPONSIVE BASE FONT SIZES ================== */
/* Media queries for responsive typography scaling */
@media (min-width: 768px) {
  :root {
    font-size: 15px; /* Tablet base (768px - 1023px) */
  }
}

@media (min-width: 1024px) {
  :root {
    font-size: 16px; /* Desktop base (â‰¥1024px) */
  }
}

/* DARK MODE TOKENS */
.dark {
  /* Dark mode colors - all other tokens remain the same */
  
  /* Background Colors */
  --color-background: 222 6% 12%;
  --color-background-secondary: 222 5% 15%;
  --color-background-tertiary: 222 4% 18%;
  --color-background-elevated: 222 4% 20%;
  
  /* Foreground/Text Colors */
  --color-foreground: 0 0% 98%;
  --color-foreground-secondary: 0 0% 85%;
  --color-foreground-tertiary: 0 0% 70%;
  --color-foreground-muted: 0 0% 55%;
  --color-foreground-inverse: 0 0% 10%;
  
  /* Surface Colors */
  --color-surface: 222 5% 15%;
  --color-surface-secondary: 222 4% 18%;
  --color-surface-tertiary: 222 4% 20%;
  
  /* Border Colors */
  --color-border: 222 5% 22%;
  --color-border-secondary: 222 4% 26%;
  --color-border-tertiary: 222 4% 30%;
  --color-border-focus: 45 90% 55%;
  
  /* Brand/Primary Colors */
  --color-primary: 45 90% 50%;
  --color-primary-hover: 45 90% 55%;
  --color-primary-active: 45 90% 60%;
  --color-primary-foreground: 45 5% 10%;
  
  /* Secondary Colors */
  --color-secondary: 222 3% 24%;
  --color-secondary-hover: 222 3% 28%;
  --color-secondary-active: 222 3% 32%;
  --color-secondary-foreground: 0 0% 90%;
  
  /* State Colors */
  --color-success: 140 60% 50%;
  --color-success-foreground: 140 5% 10%;
  --color-warning: 45 90% 55%;
  --color-warning-foreground: 45 5% 10%;
  --color-error: 0 70% 45%;
  --color-error-foreground: 0 5% 98%;
  --color-info: 220 60% 55%;
  --color-info-foreground: 220 5% 10%;
  
  /* Accent Colors */
  --color-accent: 140 12% 22%;
  --color-accent-hover: 140 12% 26%;
  --color-accent-active: 140 12% 30%;
  --color-accent-foreground: 140 8% 88%;
  
  /* Muted Colors */
  --color-muted: 140 6% 20%;
  --color-muted-hover: 140 6% 24%;
  --color-muted-active: 140 6% 28%;
  --color-muted-foreground: 140 6% 75%;
  
  /* Interactive Element States */
  --color-hover: rgba(255, 255, 255, 0.04);
  --color-active: rgba(255, 255, 255, 0.09);
  --color-disabled: rgba(255, 255, 255, 0.38);
  
  /* Focus/Selection Colors */
  --color-focus: 45 90% 55%;
  --color-selection: 45 90% 25%;
  
  /* Dark mode shadow adjustments */
  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.20);
  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.25);
  --shadow-sm: 0px 2px 4px -1px hsl(0 0% 0% / 0.22), 0px 1px 2px -1px hsl(0 0% 0% / 0.15);
  --shadow: 0px 4px 6px -1px hsl(0 0% 0% / 0.28), 0px 2px 4px -2px hsl(0 0% 0% / 0.18);
  --shadow-md: 0px 6px 12px -2px hsl(0 0% 0% / 0.32), 0px 3px 6px -3px hsl(0 0% 0% / 0.20);
  --shadow-lg: 0px 10px 20px -4px hsl(0 0% 0% / 0.38), 0px 4px 8px -4px hsl(0 0% 0% / 0.22);
  --shadow-xl: 0px 20px 30px -6px hsl(0 0% 0% / 0.45), 0px 8px 12px -6px hsl(0 0% 0% / 0.28);
  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.60);
  
  /* Dark mode elevation overlays */
  --elevate-1: var(--color-hover);
  --elevate-2: var(--color-active);
  
  /* Dark mode button outlines */
  --button-outline: rgba(255, 255, 255, .10);
  --badge-outline: rgba(255, 255, 255, .05);
  
  /* Dark mode border intensity */
  --opaque-button-border-intensity: 9;
}

/* ================================================
   BASE STYLES USING TOKENS
   ================================================ */

/* Apply responsive typography scale */
body {
  font-size: var(--font-size-body);
  line-height: var(--line-height-normal);
}

@media (max-width: 479px) {
  :root { --font-size-body: var(--font-size-body-xs); }
}
@media (min-width: 480px) and (max-width: 767px) {
  :root { --font-size-body: var(--font-size-body-sm); }
}
@media (min-width: 768px) and (max-width: 1023px) {
  :root { --font-size-body: var(--font-size-body-md); }
}
@media (min-width: 1024px) {
  :root { --font-size-body: var(--font-size-body-lg); }
}

/* High Contrast Mode - Enhanced accessibility */
.high-contrast {
  /* Stronger contrast for text */
  --color-foreground: 0 0% 0%;
  --color-background: 0 0% 100%;
  
  /* Enhanced border visibility */
  --color-border: 0 0% 30%;
  
  /* Card with stronger contrast */
  --color-surface: 0 0% 98%;
  --color-surface-foreground: 0 0% 0%;
  --color-border-secondary: 0 0% 25%;
  
  /* Stronger button contrasts */
  --color-primary: 220 100% 35%;
  --color-primary-foreground: 0 0% 100%;
  
  --color-secondary: 0 0% 20%;
  --color-secondary-foreground: 0 0% 100%;
  
  --color-muted: 0 0% 85%;
  --color-muted-foreground: 0 0% 10%;
  
  --color-accent: 140 50% 30%;
  --color-accent-foreground: 0 0% 100%;
  
  --color-error: 0 90% 40%;
  --color-error-foreground: 0 0% 100%;
  
  /* Poker table with higher contrast */
  --poker-felt: 140 80% 20%;
  --poker-card-red: 0 100% 35%;
  --poker-card-black: 0 0% 0%;
  --poker-chip-gold: 45 100% 40%;
}

.dark.high-contrast {
  /* High contrast dark mode */
  --color-foreground: 0 0% 100%;
  --color-background: 0 0% 0%;
  
  --color-border: 0 0% 70%;
  
  --color-surface: 0 0% 8%;
  --color-surface-foreground: 0 0% 100%;
  --color-border-secondary: 0 0% 75%;
  
  --color-primary: 220 100% 60%;
  --color-primary-foreground: 0 0% 0%;
  
  --color-secondary: 0 0% 85%;
  --color-secondary-foreground: 0 0% 0%;
  
  --color-muted: 0 0% 25%;
  --color-muted-foreground: 0 0% 95%;
  
  --color-accent: 140 70% 55%;
  --color-accent-foreground: 0 0% 0%;
  
  --color-error: 0 100% 55%;
  --color-error-foreground: 0 0% 0%;
  
  /* Poker colors for dark high contrast */
  --poker-felt: 140 80% 25%;
  --poker-card-red: 0 100% 50%;
  --poker-card-black: 0 0% 100%;
  --poker-chip-gold: 45 100% 55%;
}

@layer base {
    :root {
      --background: 222 15% 12%;
      --foreground: 210 40% 98%;
    }
    
    /* Improved text legibility */
    html {
      font-size: 16px;
    }
    
    /* Smooth theme transitions */
    html.theme-transition,
    html.theme-transition *,
    html.theme-transition *:before,
    html.theme-transition *:after {
      transition: background-color 300ms ease, 
                  color 300ms ease, 
                  border-color 300ms ease,
                  box-shadow 300ms ease !important;
      transition-delay: 0 !important;
    }
    
    body {
      font-size: var(--font-size-sm);
      line-height: var(--line-height-normal);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    /* Ensure minimum text sizes for accessibility */
    p, span, div {
      min-font-size: var(--font-size-sm);
    }
    
    .text-xs {
      font-size: var(--font-size-xs) !important;
    }
    
    .text-sm {
      font-size: var(--font-size-sm) !important;
    }
    
    button, .btn {
      font-size: var(--font-size-sm) !important;
      font-weight: var(--font-weight-medium);
    }
  }

  @keyframes pulse-dots {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  .animate-pulse-dots {
    animation: pulse-dots 1.4s infinite;
  }

/**
 * Elevation system utilities
 */
@layer utilities {

  /* Hide search cancel button in Chrome */
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* Poker Card Animations */
  @keyframes dealCard {
    0% {
      transform: translate3d(var(--deal-from-x, 0), var(--deal-from-y, -300px), 0) scale(0.3);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate3d(0, 0, 0) scale(1);
      opacity: 1;
    }
  }

  @keyframes flopReveal {
    0% {
      transform: translate3d(0, -50px, 0);
      opacity: 0;
    }
    100% {
      transform: translate3d(0, 0, 0);
      opacity: 1;
    }
  }

  @keyframes turnRiverReveal {
    0% {
      transform: translate3d(80px, 0, 0) scale(0.95);
      opacity: 0;
    }
    100% {
      transform: translate3d(0, 0, 0) scale(1);
      opacity: 1;
    }
  }

  @keyframes badgeSlideIn {
    0% {
      transform: translate3d(-50%, 10px, 0) scale(0.8);
      opacity: 0;
    }
    100% {
      transform: translate3d(-50%, 0, 0) scale(1);
      opacity: 1;
    }
  }

  @keyframes badgeSlideOut {
    0% {
      transform: translate3d(-50%, 0, 0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translate3d(-50%, -10px, 0) scale(0.8);
      opacity: 0;
    }
  }

  @keyframes chipFloat {
    0%, 100% {
      transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
    }
    25% {
      transform: translate3d(0, -5px, 0) rotate(8deg) scale(1.05);
    }
    50% {
      transform: translate3d(0, 0, 0) rotate(0deg) scale(1);
    }
    75% {
      transform: translate3d(0, -5px, 0) rotate(-8deg) scale(1.05);
    }
  }

  .card-deal-animation {
    animation: dealCard var(--animation-duration-normal) var(--ease-out) forwards;
    will-change: transform, opacity;
  }

  .card-flop-animation {
    animation: flopReveal calc(var(--animation-duration-normal) * 1.33) var(--ease-out) forwards;
    will-change: transform, opacity;
  }

  .card-turn-river-animation {
    animation: turnRiverReveal var(--animation-duration-base) var(--ease-out) forwards;
    will-change: transform, opacity;
  }

  /* Performance utilities */
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  .will-animate {
    will-change: transform;
  }

  .animation-complete {
    will-change: auto;
  }

  /* Elevation system */
  .no-default-hover-elevate {}
  .no-default-active-elevate {}

  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: -1;
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  .border.toggle-elevate::before {
    inset: -1px;
  }

  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    border-radius: inherit;
    z-index: 999;
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }

  /* Poker button interaction effects */
  .poker-button-glow {
    transition: box-shadow var(--transition-fast) var(--ease-in-out), 
                transform var(--transition-faster) var(--ease-in-out);
  }

  .poker-button-glow:hover:not(:disabled) {
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), 0 0 30px rgba(255, 215, 0, 0.2);
  }

  .poker-button-glow:active:not(:disabled) {
    transform: scale(0.95);
  }

  /* Enhanced pulsing glow for current player */
  @keyframes pulse-glow {
    0%, 100% {
      transform: translate3d(0, 0, 0) scale(1);
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3), 0 0 45px rgba(255, 215, 0, 0.1);
    }
    50% {
      transform: translate3d(0, 0, 0) scale(1.02);
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.8), 0 0 45px rgba(255, 215, 0, 0.5), 0 0 60px rgba(255, 215, 0, 0.3);
    }
  }

  .animate-pulse-glow {
    animation: pulse-glow calc(var(--animation-duration-slow) * 4) var(--ease-in-out) infinite;
    transform: translateZ(0);
    will-change: transform;
  }

  /* Reduced motion variant */
  @media (prefers-reduced-motion: reduce) {
    .animate-pulse-glow {
      animation: none !important;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.6) !important;
      border-width: 3px !important;
      border-color: hsl(var(--poker-chip-gold)) !important;
    }
  }

  /* Chip animations */
  @keyframes chip-shimmer {
    0%, 100% {
      filter: brightness(1) drop-shadow(0 0 8px rgba(255, 215, 0, 0.3));
    }
    50% {
      filter: brightness(1.2) drop-shadow(0 0 12px rgba(255, 215, 0, 0.6));
    }
  }

  @keyframes chip-collect {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.3);
    }
    100% {
      transform: scale(0.5);
      opacity: 0;
    }
  }

  .chip-shimmer {
    animation: chip-shimmer calc(var(--animation-duration-slow) * 4) var(--ease-in-out) infinite;
  }

  /* Win amount indicator animation */
  @keyframes float-up {
    0% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(-40px) scale(1.1);
      opacity: 0;
    }
  }

  /* Slider enhancements */
  input[type="range"]:active {
    filter: drop-shadow(0 0 8px hsl(var(--poker-chip-gold) / 0.5));
  }

  /* Smooth transitions for chip elements */
  .chip-transition {
    transition: all var(--transition-base) var(--ease-in-out);
  }

  /* Shake animation for invalid actions */
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    10%, 30%, 50%, 70%, 90% {
      transform: translateX(-8px);
    }
    20%, 40%, 60%, 80% {
      transform: translateX(8px);
    }
  }

  .animate-shake {
    animation: shake calc(var(--animation-duration-normal) * 1.33) var(--ease-spring);
  }

  /* Flash border for invalid actions */
  @keyframes flash-border {
    0%, 100% {
      border-color: hsl(var(--border));
    }
    50% {
      border-color: hsl(var(--destructive));
    }
  }

  .animate-flash-border {
    animation: flash-border calc(var(--animation-duration-normal) * 1.33) var(--ease-in-out);
  }

  /* Poker Table Textures and Ambient Effects */
  .felt-texture {
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.03) 2px,
        rgba(0, 0, 0, 0.03) 4px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(0, 0, 0, 0.03) 2px,
        rgba(0, 0, 0, 0.03) 4px
      ),
      radial-gradient(
        ellipse at center,
        hsl(var(--poker-felt)),
        hsl(var(--poker-felt) / 0.95)
      );
  }

  /* Wood texture for table edge */
  .wood-texture {
    background-image: 
      linear-gradient(
        90deg,
        hsl(var(--poker-table-border)),
        hsl(var(--poker-table-border) / 0.95) 20%,
        hsl(var(--poker-table-border)) 40%,
        hsl(var(--poker-table-border) / 0.9) 60%,
        hsl(var(--poker-table-border)) 80%,
        hsl(var(--poker-table-border) / 0.95)
      );
  }

  /* Table shadow and depth */
  .table-depth {
    box-shadow: 
      inset 0 0 50px rgba(0, 0, 0, 0.3),
      inset 0 0 100px rgba(0, 0, 0, 0.1),
      0 20px 40px rgba(0, 0, 0, 0.5);
  }

  /* Ambient lighting effect */
  .ambient-light {
    position: relative;
  }

  .ambient-light::before {
    content: "";
    position: absolute;
    inset: -50%;
    background: radial-gradient(
      circle at 30% 20%,
      rgba(255, 255, 200, 0.1),
      transparent 40%
    );
    pointer-events: none;
    z-index: 1;
  }

  /* Card shadow for realism */
  .card-shadow {
    box-shadow: 
      0 2px 4px rgba(0, 0, 0, 0.2),
      0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .card-shadow-hover {
    box-shadow: 
      0 4px 8px rgba(0, 0, 0, 0.3),
      0 8px 16px rgba(0, 0, 0, 0.15);
  }

  /* Chip stack shadows */
  .chip-stack-shadow {
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3))
            drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
  }

  /* Pot glow effect */
  .pot-glow {
    filter: drop-shadow(0 0 20px hsl(var(--poker-chip-gold) / 0.4))
            drop-shadow(0 0 40px hsl(var(--poker-chip-gold) / 0.2));
  }

  /* Winner spotlight */
  @keyframes winner-spotlight {
    0%, 100% {
      background: radial-gradient(
        circle at center,
        rgba(255, 215, 0, 0.2),
        transparent 50%
      );
    }
    50% {
      background: radial-gradient(
        circle at center,
        rgba(255, 215, 0, 0.4),
        transparent 60%
      );
    }
  }

  .winner-spotlight {
    animation: winner-spotlight calc(var(--animation-duration-slow) * 3) var(--ease-in-out) infinite;
  }

  /* Celebration confetti */
  @keyframes confetti-fall {
    0% {
      transform: translateY(-100vh) rotate(0deg);
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(720deg);
      opacity: 0;
    }
  }

  .confetti {
    animation: confetti-fall calc(var(--animation-duration-slow) * 6) var(--ease-linear);
  }

  /* Dealer button shine */
  @keyframes dealer-shine {
    0%, 100% {
      background: linear-gradient(
        45deg,
        hsl(var(--poker-chip-gold)),
        hsl(var(--poker-chip-gold) / 0.8)
      );
    }
    50% {
      background: linear-gradient(
        45deg,
        hsl(var(--poker-chip-gold) / 0.9),
        hsl(var(--poker-chip-gold))
      );
    }
  }

  .dealer-button {
    animation: dealer-shine calc(var(--animation-duration-slow) * 4) var(--ease-in-out) infinite;
  }
}

/* Mobile-specific tap highlight */
@media (hover: none) and (pointer: coarse) {
  button,
  a,
  [role="button"],
  input,
  textarea,
  select {
    -webkit-tap-highlight-color: hsl(var(--color-primary) / 0.2);
  }
}

/* Print styles using design tokens */
@media print {
  :root {
    --color-background: 0 0% 100%;
    --color-foreground: 0 0% 0%;
    --color-border: 0 0% 60%;
  }
  
  body {
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
  }
}

/* Accessibility: Focus visible styles using tokens */
*:focus-visible {
  outline: 2px solid hsl(var(--color-focus));
  outline-offset: 2px;
}

/* Selection styles using tokens */
::selection {
  background-color: hsl(var(--color-selection));
  color: hsl(var(--color-foreground));
}

/* Scrollbar styles using tokens */
::-webkit-scrollbar {
  width: var(--spacing-sm);
  height: var(--spacing-sm);
}

::-webkit-scrollbar-track {
  background: hsl(var(--color-background));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--color-border));
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--color-border-secondary));
}

/* ================================================
   iOS SPECIFIC FIXES
   ================================================ */

/* Prevent body scroll on iOS */
html {
  overscroll-behavior-y: contain;
  -webkit-text-size-adjust: 100%;
  /* Disable tap highlight globally */
  -webkit-tap-highlight-color: transparent;
}

body {
  position: fixed;
  overflow: hidden;
  width: 100%;
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height */
  height: -webkit-fill-available;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain; /* Prevent pull-to-refresh */
  /* Disable text callout on long press */
  -webkit-touch-callout: none;
}

/* Main app container */
#root {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height */
  height: -webkit-fill-available;
  overflow: hidden;
  position: relative;
}

/* iOS momentum scrolling for scrollable areas */
.scrollable-area, .allow-scroll {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
  overscroll-behavior-y: contain;
}

/* Prevent text selection on interactive elements */
button, .button, .card, .clickable, [role="button"] {
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  user-select: none;
}

/* iOS Input and Form Fixes */
input, select, textarea {
  /* Ensure minimum 16px to prevent iOS zoom, but allow larger sizes */
  font-size: max(1rem, 16px) !important; /* Prevents zoom on focus */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: 0; /* Remove iOS default radius */
}

/* Restore border radius for styled inputs */
input.rounded, select.rounded, textarea.rounded,
input[class*="rounded"], select[class*="rounded"], textarea[class*="rounded"] {
  border-radius: var(--radius-md);
}

/* Fix iOS select dropdowns */
select {
  background-image: none;
  padding-right: 30px;
}

/* iOS numeric inputs */
input[type="number"] {
  -moz-appearance: textfield;
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* iOS date inputs */
input[type="date"] {
  min-height: 48px;
  -webkit-appearance: none;
  position: relative;
}

/* iOS search input */
input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
}

/* iOS Safari Specific Fixes */

/* Fix iOS Safari flexbox bugs */
.flex, [class*="flex"] {
  display: -webkit-flex;
  display: flex;
}

.flex-1, [class*="flex-1"] {
  -webkit-flex: 1;
  flex: 1;
}

/* Fix iOS position fixed + transform bug */
.fixed {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Fix iOS backdrop filter performance */
.backdrop-blur, [class*="backdrop-blur"] {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  will-change: backdrop-filter;
}

/* Fix iOS 100vh issue - Use dynamic viewport height */
.h-screen, .min-h-screen {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height */
  height: -webkit-fill-available;
  min-height: -webkit-fill-available;
}

/* Touch target minimum sizes for iOS */
button, 
[role="button"], 
.btn,
a.button,
input[type="button"],
input[type="submit"],
input[type="reset"] {
  min-height: 44px; /* Apple HIG minimum */
  touch-action: manipulation;
}

/* Primary action buttons need larger touch targets */
.btn-primary,
.btn-action,
[data-testid*="button-"],
.action-button {
  min-height: 56px; /* Larger for primary actions */
}

/* Slider thumb minimum size */
input[type="range"]::-webkit-slider-thumb {
  width: 44px !important;
  height: 44px !important;
  -webkit-appearance: none;
}

input[type="range"]::-moz-range-thumb {
  width: 44px !important;
  height: 44px !important;
}

/* iOS landscape orientation fixes */
@supports (padding: env(safe-area-inset-left)) {
  @media (orientation: landscape) {
    .game-container {
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    
    /* Adjust poker table in landscape */
    .poker-table-container {
      padding-left: var(--safe-area-left);
      padding-right: var(--safe-area-right);
    }
  }
}

/* iOS class for specific styling */
.ios button,
.ios [role="button"] {
  min-height: 48px;
  touch-action: manipulation;
}

/* Prevent double-tap zoom on iOS */
.ios * {
  touch-action: manipulation;
}

/* iOS safe area padding utilities */
.safe-area-inset-top {
  padding-top: var(--safe-area-top);
}

.safe-area-inset-bottom {
  padding-bottom: var(--safe-area-bottom);
}

.safe-area-inset-left {
  padding-left: var(--safe-area-left);
}

.safe-area-inset-right {
  padding-right: var(--safe-area-right);
}

/* iOS specific scroll snap for better UX */
@supports (-webkit-touch-callout: none) {
  .scroll-snap {
    scroll-snap-type: y mandatory;
  }
  
  .scroll-snap > * {
    scroll-snap-align: start;
    scroll-snap-stop: always;
  }
}

/* ================== MOBILE DIALOG FIXES ================== */
/* Ensure dialogs work properly on mobile viewports */
@media (max-width: 768px) {
  /* Dialog content mobile constraints */
  .dialog-content-mobile {
    max-height: calc(100vh - var(--safe-area-top) - var(--safe-area-bottom) - 2rem) !important;
    max-height: calc(100dvh - var(--safe-area-top) - var(--safe-area-bottom) - 2rem) !important;
    margin: 1rem !important;
    width: calc(100% - 2rem) !important;
  }
  
  /* Dialog scrollable content */
  .dialog-scrollable-content {
    max-height: calc(100vh - 6rem);
    max-height: calc(100dvh - 6rem);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
    padding-right: 2rem; /* Space for close button */
  }
  
  /* Dialog footer sticky positioning */
  [role="dialog"] .dialog-footer,
  .dialog-footer {
    position: sticky;
    bottom: 0;
    background: hsl(var(--background));
    padding-top: 1rem;
    margin-top: auto;
    z-index: 10;
    border-top: 1px solid hsl(var(--border));
  }
  
  /* Ensure form fields in dialogs are accessible */
  [role="dialog"] input,
  [role="dialog"] textarea,
  [role="dialog"] select,
  [role="dialog"] button,
  .dialog-content-mobile input,
  .dialog-content-mobile textarea,
  .dialog-content-mobile select {
    font-size: 16px !important; /* Prevent iOS zoom on focus */
  }
  
  /* Dialog close button always visible */
  [role="dialog"] button[aria-label="Close"] {
    background: hsl(var(--background)) !important;
    border: 1px solid hsl(var(--border)) !important;
    padding: 0.25rem !important;
    border-radius: var(--radius-md) !important;
  }
  
  /* Ensure dialog content is scrollable */
  [role="dialog"] > div {
    display: flex;
    flex-direction: column;
    max-height: 100%;
  }
  
  /* Ensure dialog body content is scrollable */
  [role="dialog"] > div > div:not(.dialog-footer):not([aria-label="Close"]) {
    flex: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
}
/* ================================================
   MOBILE MODAL BUTTON FIXES (iOS)
   ================================================ */
/* Fix modal button click issues on iOS mobile devices */

/* All buttons in dialogs should be clickable with high z-index */
[role="dialog"] button {
  position: relative;
  z-index: 50 !important;
  pointer-events: auto !important;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Dialog close button specific fixes with higher z-index */
[role="dialog"] button[aria-label*="Close"],
[role="dialog"] button[data-testid="dialog-close-button"],
[data-radix-dialog-close] {
  position: absolute;
  z-index: 100 !important;
  pointer-events: auto !important;
  touch-action: manipulation;
  min-width: 44px;
  min-height: 44px;
  -webkit-tap-highlight-color: transparent;
}

/* Modal footer buttons must be clickable */
.dialog-footer button {
  pointer-events: auto !important;
  z-index: 50 !important;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* Ensure overlay doesn't block button clicks */
[data-radix-dialog-overlay],
[data-state="open"][data-radix-dialog-overlay] {
  pointer-events: auto;
}

/* Ensure dialog content allows interaction */
[data-radix-dialog-content],
[data-state="open"][data-radix-dialog-content] {
  pointer-events: auto;
}

/* Mobile-specific dialog adjustments */
@media (max-width: 768px) {
  /* Ensure proper viewport constraints */
  [data-radix-dialog-content] {
    max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)) !important;
    max-height: calc(100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom)) !important;
  }
  
  /* Increase touch targets on mobile for better accessibility */
  [role="dialog"] button {
    min-height: 44px;
    padding: 12px 16px;
  }
  
  /* Dialog close button larger hit area on mobile */
  [role="dialog"] button[aria-label*="Close"],
  [data-radix-dialog-close] {
    padding: 12px;
    margin: -4px;
  }
  
  /* Footer buttons with proper spacing on mobile */
  .dialog-footer {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
  
  .dialog-footer button {
    min-height: 48px;
  }
}

/* iOS-specific touch interaction fixes */
@supports (-webkit-touch-callout: none) {
  /* Remove iOS touch delays */
  [role="dialog"] button {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
  
  /* Fix iOS viewport issues with fixed positioned dialogs */
  [data-radix-dialog-content] {
    position: fixed !important;
    transform: translate(-50%, -50%) !important;
    left: 50% !important;
    top: 50% !important;
  }
}

/* Ensure Cancel buttons are always clickable */
[data-testid="button-cancel"],
[data-testid="button-join-cancel"] {
  pointer-events: auto !important;
  z-index: 50 !important;
  touch-action: manipulation;
}
\n/* High Contrast Mode */\n.high-contrast { filter: contrast(1.1) saturate(1.1); }\n.high-contrast .border { border-color: rgba(255,255,255,0.7) !important; }\n.high-contrast .felt-texture { box-shadow: 0 0 0 2px rgba(255,255,255,0.15) inset; }\n.high-contrast [data-testid="text-last-action"] { color: #fff !important; }\n
\n/* Large Text Preset */\n.large-text { font-size: 112%; }\n.large-text [data-testid="pot-amount"], .large-text [data-testid^="player-chips-"] { font-size: 1.1em !important; }\n.large-text [data-testid="button-fold"], .large-text [data-testid="button-call"], .large-text [data-testid="button-bet-raise"], .large-text [data-testid="button-all-in"] { font-size: 1.05em; }\n

.large-text [data-testid="action-history-sidebar"] { font-size: 1.05em; }

/* ================== WINNER CELEBRATION ANIMATIONS ================== */
/* Enhanced chip celebration effects */

/* Screen shake for massive wins */
.animate-screen-shake {
  animation: screen-shake 0.6s ease-in-out;
}

@keyframes screen-shake {
  0%, 100% { transform: translate(0, 0); }
  10% { transform: translate(-3px, -2px); }
  20% { transform: translate(3px, -1px); }
  30% { transform: translate(-2px, 3px); }
  40% { transform: translate(2px, 1px); }
  50% { transform: translate(-1px, -1px); }
  60% { transform: translate(1px, 2px); }
  70% { transform: translate(0, -3px); }
  80% { transform: translate(-1px, 2px); }
  90% { transform: translate(3px, 1px); }
}

/* Chip glow effect for winners */
.chip-glow {
  animation: chip-glow-pulse 2s ease-in-out infinite;
}

@keyframes chip-glow-pulse {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.6),
                0 0 40px rgba(255, 215, 0, 0.4),
                0 0 60px rgba(255, 215, 0, 0.2);
  }
  50% { 
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.8),
                0 0 60px rgba(255, 215, 0, 0.6),
                0 0 90px rgba(255, 215, 0, 0.4);
  }
}

/* Rainbow trail for Royal Flush */
.chip-rainbow-trail {
  animation: rainbow-trail 2s linear infinite;
}

@keyframes rainbow-trail {
  0% { background: hsl(0, 100%, 50%); filter: blur(2px); }
  16.66% { background: hsl(60, 100%, 50%); }
  33.33% { background: hsl(120, 100%, 50%); }
  50% { background: hsl(180, 100%, 50%); }
  66.66% { background: hsl(240, 100%, 50%); }
  83.33% { background: hsl(300, 100%, 50%); }
  100% { background: hsl(360, 100%, 50%); filter: blur(2px); }
}

/* Floating chip animation */
.chip-float {
  animation: chip-float 3s ease-in-out infinite;
}

@keyframes chip-float {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-15px) rotate(180deg); }
  100% { transform: translateY(0) rotate(360deg); }
}

/* Sparkle burst effect */
.sparkle-burst {
  animation: sparkle-burst 1s ease-out forwards;
}

@keyframes sparkle-burst {
  0% {
    transform: scale(0) rotate(0deg);
    opacity: 1;
  }
  50% {
    transform: scale(1.5) rotate(180deg);
    opacity: 0.8;
  }
  100% {
    transform: scale(2) rotate(360deg);
    opacity: 0;
  }
}

/* Firework particle effect */
.chip-firework {
  filter: blur(0.5px);
  animation: firework-glow 1.8s ease-out forwards;
}

@keyframes firework-glow {
  0% { 
    filter: blur(0px) brightness(1.5);
  }
  50% { 
    filter: blur(1px) brightness(2);
  }
  100% { 
    filter: blur(3px) brightness(0.5);
  }
}

/* Chip motion blur for fast movement */
.chip-motion-blur {
  filter: blur(2px);
  transition: filter 0.3s ease-out;
}

.chip-motion-blur.landed {
  filter: blur(0px);
}

/* Chip shadow effects */
.chip-shadow-dynamic {
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.3));
  transition: filter 0.2s ease-out;
}

.chip-shadow-dynamic.flying {
  filter: drop-shadow(0 8px 12px rgba(0, 0, 0, 0.5));
}

/* Winner aura glow */
.winner-aura {
  position: relative;
}

.winner-aura::before {
  content: '';
  position: absolute;
  inset: -20px;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
  animation: aura-pulse 2s ease-in-out infinite;
  pointer-events: none;
}

@keyframes aura-pulse {
  0%, 100% { 
    opacity: 0.6;
    transform: scale(1);
  }
  50% { 
    opacity: 1;
    transform: scale(1.1);
  }
}

/* Lightning effect for Straight Flush */
.lightning-path {
  stroke-dasharray: 100;
  stroke-dashoffset: 100;
  animation: lightning-strike 0.6s ease-out forwards;
}

@keyframes lightning-strike {
  to {
    stroke-dashoffset: 0;
  }
}

/* Explosion particles */
.explosion-particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: radial-gradient(circle, #ff6b00, #ff9500);
  border-radius: 50%;
  animation: explode-out 1.2s ease-out forwards;
}

@keyframes explode-out {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--tx), var(--ty)) scale(0);
    opacity: 0;
  }
}

/* House formation effect */
.house-formation {
  animation: form-house 2s ease-in-out forwards;
}

@keyframes form-house {
  0% {
    opacity: 0;
    transform: scale(0) rotate(-90deg);
  }
  50% {
    opacity: 1;
    transform: scale(1.2) rotate(0deg);
  }
  100% {
    opacity: 0;
    transform: scale(0.8) rotate(90deg);
  }
}

/* Slow motion effect wrapper */
.slow-motion {
  animation-duration: 3s !important;
  transition-duration: 3s !important;
}

.slow-motion * {
  animation-duration: 3s !important;
  transition-duration: 3s !important;
}

/* ================================================
   MOBILE-SPECIFIC RESPONSIVE IMPROVEMENTS
   ================================================
   Optimized for iPhone screen sizes (375px-430px)
   ================================================ */

/* iPhone SE (375px width) */
@media (max-width: 375px) {
  /* Reduce player seat spacing on very small screens */
  .player-seat {
    padding: 8px !important;
    min-height: 60px !important;
  }
  
  /* Adjust card sizes for small screens */
  .playing-card {
    width: 52px !important;
    height: 74px !important;
    font-size: 1.5rem !important;
  }
  
  /* Community cards spacing */
  .community-cards {
    gap: 2px !important;
  }
  
  /* Action buttons optimized for small screens */
  .action-controls button {
    min-height: 44px !important;
    font-size: 14px !important;
  }
}

/* iPhone 14/15 and Pro (390px-393px width) */
@media (min-width: 376px) and (max-width: 393px) {
  /* Optimal player seat sizing */
  .player-seat {
    padding: 10px !important;
    min-height: 65px !important;
  }
  
  /* Standard card sizes */
  .playing-card {
    width: 56px !important;
    height: 80px !important;
    font-size: 1.75rem !important;
  }
  
  /* Community cards with proper spacing */
  .community-cards {
    gap: 4px !important;
    padding: 8px !important;
  }
  
  /* Action controls with good touch targets */
  .action-controls button {
    min-height: 48px !important;
    font-size: 15px !important;
  }
}

/* iPhone 14/15 Pro Max (430px width) */
@media (min-width: 394px) and (max-width: 430px) {
  /* Larger player seats for bigger screens */
  .player-seat {
    padding: 12px !important;
    min-height: 72px !important;
  }
  
  /* Optimal card sizes */
  .playing-card {
    width: 60px !important;
    height: 85px !important;
    font-size: 2rem !important;
  }
  
  /* Community cards with generous spacing */
  .community-cards {
    gap: 6px !important;
    padding: 10px !important;
  }
  
  /* Action controls with premium touch targets */
  .action-controls button {
    min-height: 52px !important;
    font-size: 16px !important;
    padding: 12px 20px !important;
  }
}

/* Portrait orientation optimizations for all iPhones */
@media (orientation: portrait) and (max-width: 430px) {
  /* Stack player seats vertically */
  .poker-table {
    display: flex !important;
    flex-direction: column !important;
    justify-content: space-between !important;
  }
  
  /* Opponents at top */
  .player-seat:not(.human-player) {
    margin-bottom: 4px !important;
  }
  
  /* Human player at bottom */
  .player-seat.human-player {
    margin-top: auto !important;
    border: 2px solid var(--color-primary) !important;
  }
  
  /* Center community cards */
  .community-cards-container {
    margin: 12px auto !important;
    max-width: calc(100% - 24px) !important;
  }
  
  /* Pot display prominently */
  .pot-display {
    font-size: 1.25rem !important;
    padding: 8px 16px !important;
    background: rgba(0, 0, 0, 0.8) !important;
  }
}

/* Landscape orientation adjustments */
@media (orientation: landscape) and (max-width: 844px) {
  /* Use more horizontal space */
  .poker-table {
    padding: 8px calc(env(safe-area-inset-left) + 16px) 8px calc(env(safe-area-inset-right) + 16px) !important;
  }
  
  /* Arrange seats around the table */
  .player-seat {
    position: absolute !important;
  }
  
  /* Reduce vertical elements */
  .action-controls {
    max-height: calc(100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom) - 120px) !important;
  }
}

/* Touch target optimizations for all mobile devices */
@media (pointer: coarse) {
  /* Ensure all interactive elements meet iOS HIG minimum */
  button,
  a,
  input[type="range"],
  .clickable,
  [role="button"] {
    min-width: 44px !important;
    min-height: 44px !important;
  }
  
  /* Slider thumb optimizations */
  input[type="range"]::-webkit-slider-thumb {
    width: 44px !important;
    height: 44px !important;
    cursor: pointer !important;
  }
  
  input[type="range"]::-moz-range-thumb {
    width: 44px !important;
    height: 44px !important;
    cursor: pointer !important;
  }
}

/* High contrast mode for accessibility */
@media (prefers-contrast: high) {
  .playing-card {
    border: 2px solid currentColor !important;
  }
  
  .player-seat {
    border: 1px solid currentColor !important;
  }
  
  button {
    border: 2px solid currentColor !important;
  }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
